<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MicroTube: microTube::component::DatabaseClient Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="qertherhearh.jpg"/></td>
  <td id="projectalign">
   <div id="projectname">MicroTube<span id="projectnumber">&#160;1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classmicro_tube_1_1component_1_1_database_client.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classmicro_tube_1_1component_1_1_database_client-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">microTube::component::DatabaseClient Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>End code-gen section.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_database_client_8hpp_source.html">DatabaseClient.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for microTube::component::DatabaseClient:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classmicro_tube_1_1component_1_1_database_client.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2cbe3aae6bcac2fb1ce594eb39288222" id="r_a2cbe3aae6bcac2fb1ce594eb39288222"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2cbe3aae6bcac2fb1ce594eb39288222">DatabaseClient</a> (const std::shared_ptr&lt; oatpp::orm::Executor &gt; &amp;executor)</td></tr>
<tr class="separator:a2cbe3aae6bcac2fb1ce594eb39288222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a030a954051120775bec1a85e45965d3c" id="r_a030a954051120775bec1a85e45965d3c"><td class="memItemLeft" align="right" valign="top"><a id="a030a954051120775bec1a85e45965d3c" name="a030a954051120775bec1a85e45965d3c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (registerUser, &quot;INSERT INTO User (email, password, nickname, firstname, lastname, phonenumber, birthDate, joinDate, &quot; &quot;secretQuestion1, secretQuestion2, secretQuestion3, secretAnswer1, secretAnswer2, secretAnswer3, isAdmin, isActive) &quot; &quot;VALUES (:user.email, :user.password, :user.nickname, :user.firstname, :user.lastname, :user.phonenumber, :user.birthDate, &quot; &quot;DATE('now'), :user.secretQuestion1, :user.secretQuestion2, :user.secretQuestion3, &quot; &quot;:user.secretAnswer1, :user.secretAnswer2, :user.secretAnswer3, FALSE, TRUE) &quot; &quot;RETURNING id;&quot;, PARAM(oatpp::Object&lt; <a class="el" href="classmicro_tube_1_1dto_1_1_user_registration_d_t_o.html">microTube::dto::UserRegistrationDTO</a> &gt;, user))</td></tr>
<tr class="separator:a030a954051120775bec1a85e45965d3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a206583c7a38fc5d174014aab1965be5b" id="r_a206583c7a38fc5d174014aab1965be5b"><td class="memItemLeft" align="right" valign="top"><a id="a206583c7a38fc5d174014aab1965be5b" name="a206583c7a38fc5d174014aab1965be5b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getUserDatabaseEntryById, &quot;SELECT id, email, password, nickname, firstname, lastname, phonenumber, birthDate, joinDate, secretQuestion1, secretQuestion2, secretQuestion3, secretAnswer1, secretAnswer2, secretAnswer3, isAdmin, isActive &quot; &quot;FROM User &quot; &quot;WHERE id = :id;&quot;, PARAM(oatpp::UInt64, id))</td></tr>
<tr class="separator:a206583c7a38fc5d174014aab1965be5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac90738233970dd8c4ef614eacd29e5d0" id="r_ac90738233970dd8c4ef614eacd29e5d0"><td class="memItemLeft" align="right" valign="top"><a id="ac90738233970dd8c4ef614eacd29e5d0" name="ac90738233970dd8c4ef614eacd29e5d0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getUserInfoById, &quot;SELECT email, nickname, firstname, lastname, phonenumber, birthDate &quot; &quot;FROM User &quot; &quot;WHERE id = :id;&quot;, PARAM(oatpp::UInt64, id))</td></tr>
<tr class="separator:ac90738233970dd8c4ef614eacd29e5d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc2b55bf650bb103a901b3610de653a0" id="r_adc2b55bf650bb103a901b3610de653a0"><td class="memItemLeft" align="right" valign="top"><a id="adc2b55bf650bb103a901b3610de653a0" name="adc2b55bf650bb103a901b3610de653a0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getUserIdByEmail, &quot;SELECT id &quot; &quot;FROM User &quot; &quot;WHERE email = :email;&quot;, PARAM(oatpp::String, email))</td></tr>
<tr class="separator:adc2b55bf650bb103a901b3610de653a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a818729b9125659fd55360cc6238542" id="r_a3a818729b9125659fd55360cc6238542"><td class="memItemLeft" align="right" valign="top"><a id="a3a818729b9125659fd55360cc6238542" name="a3a818729b9125659fd55360cc6238542"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getUserByIdAndPassword, &quot;SELECT * &quot; &quot;FROM User &quot; &quot;WHERE id = :id AND password = :password;&quot;, PARAM(oatpp::UInt64, id), PARAM(oatpp::String, password))</td></tr>
<tr class="separator:a3a818729b9125659fd55360cc6238542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5fa3fcdc229f765953a65b647e6b24c" id="r_af5fa3fcdc229f765953a65b647e6b24c"><td class="memItemLeft" align="right" valign="top"><a id="af5fa3fcdc229f765953a65b647e6b24c" name="af5fa3fcdc229f765953a65b647e6b24c"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (makeUserLikeVideo, &quot;INSERT INTO Video_Likes (uuid, user_id) &quot; &quot;VALUES (:videoId, :userId) &quot; &quot;ON CONFLICT (uuid, user_id) DO NOTHING;&quot;, PARAM(oatpp::String, videoId), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:af5fa3fcdc229f765953a65b647e6b24c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a664880e00652864cd7595c88ff43ef52" id="r_a664880e00652864cd7595c88ff43ef52"><td class="memItemLeft" align="right" valign="top"><a id="a664880e00652864cd7595c88ff43ef52" name="a664880e00652864cd7595c88ff43ef52"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getLikeCountForVideo, &quot;SELECT COUNT(*) AS likeCount &quot; &quot;FROM Video_Likes &quot; &quot;WHERE uuid = :videoId;&quot;, PARAM(oatpp::String, videoId))</td></tr>
<tr class="separator:a664880e00652864cd7595c88ff43ef52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bc6f0c7ceccd171dc59d41914f6347b" id="r_a8bc6f0c7ceccd171dc59d41914f6347b"><td class="memItemLeft" align="right" valign="top"><a id="a8bc6f0c7ceccd171dc59d41914f6347b" name="a8bc6f0c7ceccd171dc59d41914f6347b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getDislikeCountForVideo, &quot;SELECT COUNT(*) AS dislikeCount &quot; &quot;FROM Video_Disikes &quot; &quot;WHERE uuid = :videoId;&quot;, PARAM(oatpp::String, videoId))</td></tr>
<tr class="separator:a8bc6f0c7ceccd171dc59d41914f6347b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08174461f9f9bbacdc9218ac5373d7c3" id="r_a08174461f9f9bbacdc9218ac5373d7c3"><td class="memItemLeft" align="right" valign="top"><a id="a08174461f9f9bbacdc9218ac5373d7c3" name="a08174461f9f9bbacdc9218ac5373d7c3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getUniqueViewCountForVideo, &quot;SELECT COUNT(*) AS uniqueViewCount &quot; &quot;FROM Videos_Unique_Views &quot; &quot;WHERE uuid = :videoId;&quot;, PARAM(oatpp::String, videoId))</td></tr>
<tr class="separator:a08174461f9f9bbacdc9218ac5373d7c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11f5fd24913a31d29fd8b9a964b92062" id="r_a11f5fd24913a31d29fd8b9a964b92062"><td class="memItemLeft" align="right" valign="top"><a id="a11f5fd24913a31d29fd8b9a964b92062" name="a11f5fd24913a31d29fd8b9a964b92062"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (makeUserDislikeVideo, &quot;INSERT INTO Video_Disikes (uuid, user_id) &quot; &quot;VALUES (:videoId, :userId) &quot; &quot;ON CONFLICT (uuid, user_id) DO NOTHING;&quot;, PARAM(oatpp::String, videoId), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:a11f5fd24913a31d29fd8b9a964b92062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037e4c32d71758a2ca63ac79285e4da0" id="r_a037e4c32d71758a2ca63ac79285e4da0"><td class="memItemLeft" align="right" valign="top"><a id="a037e4c32d71758a2ca63ac79285e4da0" name="a037e4c32d71758a2ca63ac79285e4da0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (removeLike, &quot;DELETE FROM Video_Likes &quot; &quot;WHERE uuid = :videoId AND user_id = :userId;&quot;, PARAM(oatpp::String, videoId), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:a037e4c32d71758a2ca63ac79285e4da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab66752c68593c9b27bdf76f7875fc8f4" id="r_ab66752c68593c9b27bdf76f7875fc8f4"><td class="memItemLeft" align="right" valign="top"><a id="ab66752c68593c9b27bdf76f7875fc8f4" name="ab66752c68593c9b27bdf76f7875fc8f4"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (removeDislike, &quot;DELETE FROM Video_Disikes &quot; &quot;WHERE uuid = :videoId AND user_id = :userId;&quot;, PARAM(oatpp::String, videoId), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:ab66752c68593c9b27bdf76f7875fc8f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0af88ab3358efc218d1ee988fb0557" id="r_a6e0af88ab3358efc218d1ee988fb0557"><td class="memItemLeft" align="right" valign="top"><a id="a6e0af88ab3358efc218d1ee988fb0557" name="a6e0af88ab3358efc218d1ee988fb0557"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (addSubscription, &quot;INSERT INTO User_Channel_Subscriptions (memberID, creatorID) &quot; &quot;VALUES (:memberId, :creatorId) &quot; &quot;ON CONFLICT (memberID, creatorID) DO NOTHING;&quot;, PARAM(oatpp::UInt64, memberId), PARAM(oatpp::UInt64, creatorId))</td></tr>
<tr class="separator:a6e0af88ab3358efc218d1ee988fb0557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b2aa6c31132d82d2962ba854f6a2f0" id="r_ac6b2aa6c31132d82d2962ba854f6a2f0"><td class="memItemLeft" align="right" valign="top"><a id="ac6b2aa6c31132d82d2962ba854f6a2f0" name="ac6b2aa6c31132d82d2962ba854f6a2f0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (removeSubscription, &quot;DELETE FROM User_Channel_Subscriptions &quot; &quot;WHERE memberID = :memberId AND creatorID = :creatorId;&quot;, PARAM(oatpp::UInt64, memberId), PARAM(oatpp::UInt64, creatorId))</td></tr>
<tr class="separator:ac6b2aa6c31132d82d2962ba854f6a2f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a396404255db303701650795fcc6a29b5" id="r_a396404255db303701650795fcc6a29b5"><td class="memItemLeft" align="right" valign="top"><a id="a396404255db303701650795fcc6a29b5" name="a396404255db303701650795fcc6a29b5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getSubscriberCountForChannel, &quot;SELECT COUNT(*) AS subscriberCount &quot; &quot;FROM User_Channel_Subscriptions &quot; &quot;WHERE creatorID = :channelId;&quot;, PARAM(oatpp::UInt64, channelId))</td></tr>
<tr class="separator:a396404255db303701650795fcc6a29b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99bf544be0c66297a13f86f18d0807eb" id="r_a99bf544be0c66297a13f86f18d0807eb"><td class="memItemLeft" align="right" valign="top"><a id="a99bf544be0c66297a13f86f18d0807eb" name="a99bf544be0c66297a13f86f18d0807eb"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (checkChannelExists, &quot;SELECT EXISTS (&quot; &quot;  SELECT 1 &quot; &quot;  FROM Channel &quot; &quot;  WHERE id = :channelId&quot; &quot;) AS channelExists;&quot;, PARAM(oatpp::UInt64, channelId))</td></tr>
<tr class="separator:a99bf544be0c66297a13f86f18d0807eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5cdd21c3b6f3789c2f3a951703b585" id="r_a6e5cdd21c3b6f3789c2f3a951703b585"><td class="memItemLeft" align="right" valign="top"><a id="a6e5cdd21c3b6f3789c2f3a951703b585" name="a6e5cdd21c3b6f3789c2f3a951703b585"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getChannelDescription, &quot;SELECT description &quot; &quot;FROM Channel &quot; &quot;WHERE id = :channelId;&quot;, PARAM(oatpp::UInt64, channelId))</td></tr>
<tr class="separator:a6e5cdd21c3b6f3789c2f3a951703b585"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a296ffbf58d7f2616758925764b016334" id="r_a296ffbf58d7f2616758925764b016334"><td class="memItemLeft" align="right" valign="top"><a id="a296ffbf58d7f2616758925764b016334" name="a296ffbf58d7f2616758925764b016334"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (setChannelDescription, &quot;UPDATE Channel &quot; &quot;SET description = :newDescription &quot; &quot;WHERE id = :channelId;&quot;, PARAM(oatpp::String, newDescription), PARAM(oatpp::UInt64, channelId))</td></tr>
<tr class="separator:a296ffbf58d7f2616758925764b016334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74473befc435d5f0fe62ca6e142359ab" id="r_a74473befc435d5f0fe62ca6e142359ab"><td class="memItemLeft" align="right" valign="top"><a id="a74473befc435d5f0fe62ca6e142359ab" name="a74473befc435d5f0fe62ca6e142359ab"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (hasUserViewedVideo, &quot;SELECT EXISTS (&quot; &quot;  SELECT 1 &quot; &quot;  FROM Videos_Unique_Views &quot; &quot;  WHERE uuid = :videoId AND user_id = :userId&quot; &quot;) AS hasViewed;&quot;, PARAM(oatpp::String, videoId), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:a74473befc435d5f0fe62ca6e142359ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad80288f173d9f8bb21a8ab51a414353d" id="r_ad80288f173d9f8bb21a8ab51a414353d"><td class="memItemLeft" align="right" valign="top"><a id="ad80288f173d9f8bb21a8ab51a414353d" name="ad80288f173d9f8bb21a8ab51a414353d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (addUniqueView, &quot;INSERT INTO Videos_Unique_Views (uuid, user_id) &quot; &quot;SELECT :videoId, :userId &quot; &quot;WHERE :videoId IS NOT NULL AND :userId IS NOT NULL AND :videoId != '' &quot; &quot;ON CONFLICT (uuid, user_id) DO NOTHING;&quot;, PARAM(oatpp::String, videoId), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:ad80288f173d9f8bb21a8ab51a414353d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4e742af2a37b91b76740a4e119bda07" id="r_ac4e742af2a37b91b76740a4e119bda07"><td class="memItemLeft" align="right" valign="top"><a id="ac4e742af2a37b91b76740a4e119bda07" name="ac4e742af2a37b91b76740a4e119bda07"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getUniqueViewCount, &quot;SELECT COUNT(*) AS viewCount &quot; &quot;FROM Videos_Unique_Views &quot; &quot;WHERE uuid = :videoId;&quot;, PARAM(oatpp::String, videoId))</td></tr>
<tr class="separator:ac4e742af2a37b91b76740a4e119bda07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeb2651d4c308f11087cf78aa56b5e1d" id="r_afeb2651d4c308f11087cf78aa56b5e1d"><td class="memItemLeft" align="right" valign="top"><a id="afeb2651d4c308f11087cf78aa56b5e1d" name="afeb2651d4c308f11087cf78aa56b5e1d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (isTokenValid, &quot;SELECT token, user_id AS id &quot; &quot;FROM User_Tokens &quot; &quot;WHERE token = :token &quot; &quot;AND validTillDate &gt; DATE('now');&quot;, PARAM(oatpp::String, token))</td></tr>
<tr class="separator:afeb2651d4c308f11087cf78aa56b5e1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafc9dcf0dcf67764a3bd84b60e1504af" id="r_aafc9dcf0dcf67764a3bd84b60e1504af"><td class="memItemLeft" align="right" valign="top"><a id="aafc9dcf0dcf67764a3bd84b60e1504af" name="aafc9dcf0dcf67764a3bd84b60e1504af"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (insertNewToken, &quot;INSERT INTO User_Tokens (token, user_id, createDate, validTillDate) &quot; &quot;VALUES (:token, :userId, DATE('now'), DATE('now', '+30 days'));&quot;, PARAM(oatpp::String, token), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:aafc9dcf0dcf67764a3bd84b60e1504af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae189d627b56127102ef6901f83867a71" id="r_ae189d627b56127102ef6901f83867a71"><td class="memItemLeft" align="right" valign="top"><a id="ae189d627b56127102ef6901f83867a71" name="ae189d627b56127102ef6901f83867a71"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (extendTokenValidity, &quot;UPDATE User_Tokens &quot; &quot;SET validTillDate = DATE('now', '+30 days') &quot; &quot;WHERE token = :token &quot; &quot;AND validTillDate &gt; DATE('now');&quot;, PARAM(oatpp::String, token))</td></tr>
<tr class="separator:ae189d627b56127102ef6901f83867a71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d9364f7c187855695b6a326fb778793" id="r_a2d9364f7c187855695b6a326fb778793"><td class="memItemLeft" align="right" valign="top"><a id="a2d9364f7c187855695b6a326fb778793" name="a2d9364f7c187855695b6a326fb778793"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getUserIdByToken, &quot;SELECT user_id &quot; &quot;FROM User_Tokens &quot; &quot;WHERE token = :token &quot; &quot;AND validTillDate &gt; DATE('now');&quot;, PARAM(oatpp::String, token))</td></tr>
<tr class="separator:a2d9364f7c187855695b6a326fb778793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c83546ad3b19562b0f9add6f66f1f84" id="r_a9c83546ad3b19562b0f9add6f66f1f84"><td class="memItemLeft" align="right" valign="top"><a id="a9c83546ad3b19562b0f9add6f66f1f84" name="a9c83546ad3b19562b0f9add6f66f1f84"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getValidTokens, &quot;SELECT token &quot; &quot;FROM User_Tokens &quot; &quot;WHERE user_id = :userId &quot; &quot;AND validTillDate &gt; DATE('now');&quot;, PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:a9c83546ad3b19562b0f9add6f66f1f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a30d05cac70e8c668e4591444366060" id="r_a5a30d05cac70e8c668e4591444366060"><td class="memItemLeft" align="right" valign="top"><a id="a5a30d05cac70e8c668e4591444366060" name="a5a30d05cac70e8c668e4591444366060"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (updateChannelDescriptionByUserId, &quot;UPDATE Channel &quot; &quot;SET description = :newDescription &quot; &quot;WHERE id = (&quot; &quot;  SELECT channelId &quot; &quot;  FROM UserChannelJunction &quot; &quot;  WHERE user_id = :userId &quot; &quot;  LIMIT 1&quot; &quot;);&quot;, PARAM(oatpp::String, newDescription), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:a5a30d05cac70e8c668e4591444366060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d5b7b57d34a5b2c120f276dbe2c7815" id="r_a3d5b7b57d34a5b2c120f276dbe2c7815"><td class="memItemLeft" align="right" valign="top"><a id="a3d5b7b57d34a5b2c120f276dbe2c7815" name="a3d5b7b57d34a5b2c120f276dbe2c7815"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (updateChannelDescriptionById, &quot;UPDATE Channel &quot; &quot;SET description = :newDescription &quot; &quot;WHERE id = :channelId;&quot;, PARAM(oatpp::String, newDescription), PARAM(oatpp::UInt64, channelId))</td></tr>
<tr class="separator:a3d5b7b57d34a5b2c120f276dbe2c7815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2d8b7d6889ca46cf78db6481964bc21" id="r_af2d8b7d6889ca46cf78db6481964bc21"><td class="memItemLeft" align="right" valign="top"><a id="af2d8b7d6889ca46cf78db6481964bc21" name="af2d8b7d6889ca46cf78db6481964bc21"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (createNewChannel, &quot;INSERT INTO Channel (description) &quot; &quot;VALUES (:description) &quot; &quot;RETURNING id;&quot;, PARAM(oatpp::String, description))</td></tr>
<tr class="separator:af2d8b7d6889ca46cf78db6481964bc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a016e78ad053a5fcb28cb66183158bed2" id="r_a016e78ad053a5fcb28cb66183158bed2"><td class="memItemLeft" align="right" valign="top"><a id="a016e78ad053a5fcb28cb66183158bed2" name="a016e78ad053a5fcb28cb66183158bed2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (createUserChannelJunction, &quot;INSERT INTO UserChannelJunction (channelId, user_id) &quot; &quot;VALUES (:channelId, :userId) &quot; &quot;ON CONFLICT (channelId, user_id) DO NOTHING;&quot;, PARAM(oatpp::UInt64, channelId), PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:a016e78ad053a5fcb28cb66183158bed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a777808487ac5fa237b08315e8a27ce80" id="r_a777808487ac5fa237b08315e8a27ce80"><td class="memItemLeft" align="right" valign="top"><a id="a777808487ac5fa237b08315e8a27ce80" name="a777808487ac5fa237b08315e8a27ce80"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (createChannelWithDescription, &quot;INSERT INTO Channel (description) &quot; &quot;VALUES (:description) &quot; &quot;RETURNING id;&quot;, PARAM(oatpp::String, description))</td></tr>
<tr class="separator:a777808487ac5fa237b08315e8a27ce80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9af4949387a8ad07664bff7e064d072" id="r_ad9af4949387a8ad07664bff7e064d072"><td class="memItemLeft" align="right" valign="top"><a id="ad9af4949387a8ad07664bff7e064d072" name="ad9af4949387a8ad07664bff7e064d072"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (updateUserInfo, &quot;UPDATE User &quot; &quot;SET email = :user.email, &quot; &quot;    password = :user.password, &quot; &quot;    nickname = :user.nickname, &quot; &quot;    firstname = :user.firstname, &quot; &quot;    lastname = :user.lastname, &quot; &quot;    phonenumber = :user.phonenumber, &quot; &quot;    birthDate = :user.birthDate, &quot; &quot;    secretQuestion1 = :user.secretQuestion1, &quot; &quot;    secretQuestion2 = :user.secretQuestion2, &quot; &quot;    secretQuestion3 = :user.secretQuestion3, &quot; &quot;    secretAnswer1 = :user.secretAnswer1, &quot; &quot;    secretAnswer2 = :user.secretAnswer2, &quot; &quot;    secretAnswer3 = :user.secretAnswer3, &quot; &quot;    isAdmin = :user.isAdmin, &quot; &quot;    isActive = :user.isActive &quot; &quot;WHERE id = :id;&quot;, PARAM(oatpp::Object&lt; <a class="el" href="classmicro_tube_1_1dto_1_1_user_database_entry.html">microTube::dto::UserDatabaseEntry</a> &gt;, user), PARAM(oatpp::UInt64, id))</td></tr>
<tr class="separator:ad9af4949387a8ad07664bff7e064d072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a10cbf1d83a8d01f5f105a8af571611" id="r_a0a10cbf1d83a8d01f5f105a8af571611"><td class="memItemLeft" align="right" valign="top"><a id="a0a10cbf1d83a8d01f5f105a8af571611" name="a0a10cbf1d83a8d01f5f105a8af571611"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getChannelIdByUserId, &quot;SELECT channelId &quot; &quot;FROM UserChannelJunction &quot; &quot;WHERE user_id = :userId &quot; &quot;LIMIT 1;&quot;, PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:a0a10cbf1d83a8d01f5f105a8af571611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a038121b4a4fe8614e05eb6db7fd31dfc" id="r_a038121b4a4fe8614e05eb6db7fd31dfc"><td class="memItemLeft" align="right" valign="top"><a id="a038121b4a4fe8614e05eb6db7fd31dfc" name="a038121b4a4fe8614e05eb6db7fd31dfc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>QUERY</b> (getSubscribedChannelsForUser, &quot;SELECT c.id, c.description &quot; &quot;FROM User_Channel_Subscriptions ucs &quot; &quot;INNER JOIN Channel c ON ucs.creatorID = c.id &quot; &quot;WHERE ucs.memberID = :userId;&quot;, PARAM(oatpp::UInt64, userId))</td></tr>
<tr class="separator:a038121b4a4fe8614e05eb6db7fd31dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaebdc68fb560de57034d5e3f82ae7113" id="r_aaebdc68fb560de57034d5e3f82ae7113"><td class="memItemLeft" align="right" valign="top">oatpp::Object&lt; <a class="el" href="classmicro_tube_1_1dto_1_1_user_token_pair_d_t_o.html">dto::UserTokenPairDTO</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaebdc68fb560de57034d5e3f82ae7113">isBearerTokenValid</a> (oatpp::String tokenStr)</td></tr>
<tr class="separator:aaebdc68fb560de57034d5e3f82ae7113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abece1e9e84386700ef2ac5a904b32ec0" id="r_abece1e9e84386700ef2ac5a904b32ec0"><td class="memItemLeft" align="right" valign="top">oatpp::Object&lt; <a class="el" href="classmicro_tube_1_1dto_1_1_user_token_pair_d_t_o.html">dto::UserTokenPairDTO</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abece1e9e84386700ef2ac5a904b32ec0">checkBearerThrowIfInvalid</a> (oatpp::String tokenStr)</td></tr>
<tr class="separator:abece1e9e84386700ef2ac5a904b32ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e02a84b0ee7c94fffe3737cdbdff93" id="r_a12e02a84b0ee7c94fffe3737cdbdff93"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12e02a84b0ee7c94fffe3737cdbdff93">isUserAdmin</a> (const oatpp::UInt64 userId)</td></tr>
<tr class="separator:a12e02a84b0ee7c94fffe3737cdbdff93"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>End code-gen section. </p>

<p class="definition">Definition at line <a class="el" href="_database_client_8hpp_source.html#l00021">21</a> of file <a class="el" href="_database_client_8hpp_source.html">DatabaseClient.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2cbe3aae6bcac2fb1ce594eb39288222" name="a2cbe3aae6bcac2fb1ce594eb39288222"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cbe3aae6bcac2fb1ce594eb39288222">&#9670;&#160;</a></span>DatabaseClient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">microTube::component::DatabaseClient::DatabaseClient </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; oatpp::orm::Executor &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>executor</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_database_client_8hpp_source.html#l00024">24</a> of file <a class="el" href="_database_client_8hpp_source.html">DatabaseClient.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abece1e9e84386700ef2ac5a904b32ec0" name="abece1e9e84386700ef2ac5a904b32ec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abece1e9e84386700ef2ac5a904b32ec0">&#9670;&#160;</a></span>checkBearerThrowIfInvalid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">oatpp::Object&lt; <a class="el" href="classmicro_tube_1_1dto_1_1_user_token_pair_d_t_o.html">dto::UserTokenPairDTO</a> &gt; microTube::component::DatabaseClient::checkBearerThrowIfInvalid </td>
          <td>(</td>
          <td class="paramtype">oatpp::String</td>          <td class="paramname"><span class="paramname"><em>tokenStr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_database_client_8hpp_source.html#l00308">308</a> of file <a class="el" href="_database_client_8hpp_source.html">DatabaseClient.hpp</a>.</p>

</div>
</div>
<a id="aaebdc68fb560de57034d5e3f82ae7113" name="aaebdc68fb560de57034d5e3f82ae7113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaebdc68fb560de57034d5e3f82ae7113">&#9670;&#160;</a></span>isBearerTokenValid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">oatpp::Object&lt; <a class="el" href="classmicro_tube_1_1dto_1_1_user_token_pair_d_t_o.html">dto::UserTokenPairDTO</a> &gt; microTube::component::DatabaseClient::isBearerTokenValid </td>
          <td>(</td>
          <td class="paramtype">oatpp::String</td>          <td class="paramname"><span class="paramname"><em>tokenStr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_database_client_8hpp_source.html#l00287">287</a> of file <a class="el" href="_database_client_8hpp_source.html">DatabaseClient.hpp</a>.</p>

</div>
</div>
<a id="a12e02a84b0ee7c94fffe3737cdbdff93" name="a12e02a84b0ee7c94fffe3737cdbdff93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12e02a84b0ee7c94fffe3737cdbdff93">&#9670;&#160;</a></span>isUserAdmin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool microTube::component::DatabaseClient::isUserAdmin </td>
          <td>(</td>
          <td class="paramtype">const oatpp::UInt64</td>          <td class="paramname"><span class="paramname"><em>userId</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_database_client_8hpp_source.html#l00326">326</a> of file <a class="el" href="_database_client_8hpp_source.html">DatabaseClient.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>D:/Documents/repos/MicroTube/Backend/Server/src/sql/<a class="el" href="_database_client_8hpp_source.html">DatabaseClient.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>microTube</b></li><li class="navelem"><b>component</b></li><li class="navelem"><a class="el" href="classmicro_tube_1_1component_1_1_database_client.html">DatabaseClient</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
